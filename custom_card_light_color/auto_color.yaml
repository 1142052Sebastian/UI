auto_color:
  state:
    - value: 'on'
      styles:
        icon:
          - color: >
              [[[ 
                  var color = entity.attributes.rgb_color;
                  if (color != null){
                     return 'rgba(' + entity.attributes.rgb_color + ',1)';
                  }
                  else{
                    return 'rgba(var(--color-yellow),1)';
                  } 
              ]]]
        label: ## delete if you want theme text-color
          - color: >
              [[[
                var color = entity.attributes.rgb_color;
                if (states['sun.sun'].state == "below_horizon"){
                  if (color != null){
                         return 'rgba(' + entity.attributes.rgb_color + ',1)';
                  }else{
                    return 'rgba(var(--color-yellow),1)';
                  }
                }else if (states['sun.sun'].state == "above_horizon")
                  return 'rgba(var(--color-yellow-text),1)';
              ]]]
        name: ## delete if you want theme text-color
          - color: >
              [[[
                var color = entity.attributes.rgb_color;
                if (states['sun.sun'].state == "below_horizon"){
                  if (color != null){
                         return 'rgba(' + entity.attributes.rgb_color + ',1)';
                  }else{
                    return 'rgba(var(--color-yellow),1)';
                  }
                }else if (states['sun.sun'].state == "above_horizon")
                  return 'rgba(var(--color-yellow-text),1)';
              ]]]
        img_cell:
          - background-color: >
              [[[ 
                  var color = entity.attributes.rgb_color;
                  if (color != null){
                     return 'rgba(' + entity.attributes.rgb_color + ',0.2)';
                  }
                  else{
                    return 'rgba(var(--color-yellow),0.2)';
                  } 
              ]]]